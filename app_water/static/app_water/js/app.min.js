/*
Template Name: HUD - Responsive Bootstrap 5 Admin Template
Version: 1.3.0
Author: Sean Ngu
Website: http://www.seantheme.com/hud/
	----------------------------
		APPS CONTENT TABLE
	----------------------------

	<!-- ======== GLOBAL SCRIPT SETTING ======== -->
	01. Global Variable
	02. Handle Scrollbar
	03. Handle Header Search Bar
	04. Handle Sidebar Menu
	05. Handle Sidebar Minify
	06. Handle Sidebar Minify Float Menu
	07. Handle Dropdown Close Option
	08. Handle Panel - Remove / Reload / Collapse / Expand
	09. Handle Tooltip & Popover Activation
	10. Handle Scroll to Top Button Activation
	11. Handle hexToRgba
	12. Handle Scroll to
	
	<!-- ======== APPLICATION SETTING ======== -->
	Application Controller
*/



/* 01. Global Variable
------------------------------------------------ */

var app = {
	id: '#app',
	isMobile: ((/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) || window.innerWidth < 992),
	bootstrap: {
		tooltip: {
			attr: 'data-bs-toggle="tooltip"'
		},
		popover: {
			attr: 'data-bs-toggle="popover"'
		},
		modal: {
			attr: 'data-bs-toggle="modal"',
			dismissAttr: 'data-bs-dismiss="modal"',
			event: {
				hidden: 'hidden.bs.modal'
			}
		},
		nav: {
			class: 'nav',
			tabs: {
				class: 'nav-tabs',
				activeClass: 'active',
				itemClass: 'nav-item',
				itemLinkClass: 'nav-link'
			}
		}
	},
	header: {
		id: '#header',
		class: 'app-header',
		hasScrollClass: 'has-scroll'
	},
	sidebar: {
		id: '#sidebar',
		class: 'app-sidebar',
		scrollBar: {
			localStorage: 'appSidebarScrollPosition',
			dom: ''
		},
		menu: {
			class: 'menu',
			animationTime: 0,
			itemClass: 'menu-item',
			itemLinkClass: 'menu-link',
			hasSubClass: 'has-sub',
			activeClass: 'active',
			expandingClass: 'expanding',
			expandClass: 'expand',
			submenu: {
				class: 'menu-submenu',
			}
		},
		mobile: {
			toggleAttr: 'data-toggle="app-sidebar-mobile"',
			dismissAttr: 'data-dismiss="app-sidebar-mobile"',
			toggledClass: 'app-sidebar-mobile-toggled',
			closedClass: 'app-sidebar-mobile-closed',
			backdrop: {
				class: 'app-sidebar-mobile-backdrop'
			}
		},
		minify: {
			toggleAttr: 'data-toggle="app-sidebar-minify"',
			toggledClass: 'app-sidebar-minified',
			cookieName: 'app-sidebar-minified'
		},
		floatSubmenu: {
			id: '#app-sidebar-float-submenu',
			dom: '',
			timeout: '',
			class: 'app-sidebar-float-submenu',
			container: {
				class: 'app-sidebar-float-submenu-container'
			},
			arrow: {
				id: '#app-sidebar-float-submenu-arrow',
				class: 'app-sidebar-float-submenu-arrow'
			},
			line: {
				id: '#app-sidebar-float-submenu-line',
				class: 'app-sidebar-float-submenu-line'
			},
			overflow: {
				class: 'overflow-scroll mh-100vh'
			}
		},
		search: {
			class: 'menu-search',
			toggleAttr: 'data-sidebar-search="true"',
			hideClass: 'd-none',
			foundClass: 'has-text'
		},
		transparent: {
			class: 'app-sidebar-transparent'
		}
	},
	scrollBar: {
		attr: 'data-scrollbar="true"',
		skipMobileAttr: 'data-skip-mobile',
		initAttr: 'data-init',
		heightAttr: 'data-height',
		wheelPropagationAttr: 'data-wheel-propagation'
	},
	content: {
		id: '#content',
		class: 'app-content',
		fullHeight: {
			class: 'app-content-full-height'
		},
		fullWidth: {
			class: 'app-content-full-width'
		}
	},
	layout: {
		sidebarLight: {
			class: 'app-with-light-sidebar'
		},
		sidebarEnd: {
			class: 'app-with-end-sidebar'
		},
		sidebarWide: {
			class: 'app-with-wide-sidebar'
		},
		sidebarMinified: {
			class: 'app-sidebar-minified'
		},
		sidebarTwo: {
			class: 'app-with-two-sidebar'
		},
		withoutHeader: {
			class: 'app-without-header'
		},
		withoutSidebar: {
			class: 'app-without-sidebar'
		},
		topMenu: {
			class: 'app-with-top-menu'
		},
		boxedLayout: {
			class: 'boxed-layout'
		}
	},
	scrollToTopBtn: {
		showClass: 'show',
		heightShow: 200,
		toggleAttr: 'data-toggle="scroll-to-top"',
		scrollSpeed: 500
	},
	scrollTo: {
		attr: 'data-toggle="scroll-to"',
		target: 'data-target',
		linkTarget: 'href'
	},
	themePanel: {
		class: 'app-theme-panel',
		toggleAttr: 'data-toggle="theme-panel-expand"',
		cookieName: 'app-theme-panel-expand',
		activeClass: 'active',
		themeListCLass: 'app-theme-list',
		themeListItemCLass: 'app-theme-list-item',
		themeCoverClass: 'app-theme-cover',
		themeCoverItemCLass: 'app-theme-cover-item',
		theme: {
			toggleAttr: 'data-toggle="theme-selector"',
			classAttr: 'data-theme-class',
			cookieName: 'app-theme',
			activeClass: 'active'
		},
		themeCover: {
			toggleAttr: 'data-toggle="theme-cover-selector"',
			classAttr: 'data-theme-cover-class',
			cookieName: 'app-theme-cover',
			activeClass: 'active'
		}
	},
	dismissClass: {
		toggleAttr: 'data-dismiss-class',
		targetAttr: 'data-dismiss-target'
	},
	toggleClass: {
		toggleAttr: 'data-toggle-class',
		targetAttr: 'data-toggle-target'
	},
	font: {
		family: getComputedStyle(document.body).getPropertyValue('--bs-body-font-family'),
		size: getComputedStyle(document.body).getPropertyValue('--bs-body-font-size'),
		weight: getComputedStyle(document.body).getPropertyValue('--bs-body-font-weight')
	},
	color: {
		theme: getComputedStyle(document.body).getPropertyValue('--bs-theme'),
		blue: getComputedStyle(document.body).getPropertyValue('--bs-blue'),
		green: getComputedStyle(document.body).getPropertyValue('--bs-green'),
		orange: getComputedStyle(document.body).getPropertyValue('--bs-orange'),
		red: getComputedStyle(document.body).getPropertyValue('--bs-red'),
		cyan: getComputedStyle(document.body).getPropertyValue('--bs-cyan'),
		purple: getComputedStyle(document.body).getPropertyValue('--bs-purple'),
		yellow: getComputedStyle(document.body).getPropertyValue('--bs-yellow'),
		indigo: getComputedStyle(document.body).getPropertyValue('--bs-indigo'),
		pink: getComputedStyle(document.body).getPropertyValue('--bs-pink'),
		black: getComputedStyle(document.body).getPropertyValue('--bs-black'),
		white: getComputedStyle(document.body).getPropertyValue('--bs-white'),
		gray: getComputedStyle(document.body).getPropertyValue('--bs-gray'),
		dark: getComputedStyle(document.body).getPropertyValue('--bs-dark'),
		gray100: getComputedStyle(document.body).getPropertyValue('--bs-gray-100'),
		gray200: getComputedStyle(document.body).getPropertyValue('--bs-gray-200'),
		gray300: getComputedStyle(document.body).getPropertyValue('--bs-gray-300'),
		gray400: getComputedStyle(document.body).getPropertyValue('--bs-gray-400'),
		gray500: getComputedStyle(document.body).getPropertyValue('--bs-gray-500'),
		gray600: getComputedStyle(document.body).getPropertyValue('--bs-gray-600'),
		gray700: getComputedStyle(document.body).getPropertyValue('--bs-gray-700'),
		gray800: getComputedStyle(document.body).getPropertyValue('--bs-gray-800'),
		gray900: getComputedStyle(document.body).getPropertyValue('--bs-gray-900'),
		
		themeRgb: getComputedStyle(document.body).getPropertyValue('--bs-theme-rgb'),
		blueRgb: getComputedStyle(document.body).getPropertyValue('--bs-blue-rgb'),
		greenRgb: getComputedStyle(document.body).getPropertyValue('--bs-green-rgb'),
		orangeRgb: getComputedStyle(document.body).getPropertyValue('--bs-orange-rgb'),
		redRgb: getComputedStyle(document.body).getPropertyValue('--bs-red-rgb'),
		cyanRgb: getComputedStyle(document.body).getPropertyValue('--bs-cyan-rgb'),
		purpleRgb: getComputedStyle(document.body).getPropertyValue('--bs-purple-rgb'),
		yellowRgb: getComputedStyle(document.body).getPropertyValue('--bs-yellow-rgb'),
		indigoRgb: getComputedStyle(document.body).getPropertyValue('--bs-indigo-rgb'),
		pinkRgb: getComputedStyle(document.body).getPropertyValue('--bs-pink-rgb'),
		blackRgb: getComputedStyle(document.body).getPropertyValue('--bs-black-rgb'),
		whiteRgb: getComputedStyle(document.body).getPropertyValue('--bs-white-rgb'),
		grayRgb: getComputedStyle(document.body).getPropertyValue('--bs-gray-rgb'),
		darkRgb: getComputedStyle(document.body).getPropertyValue('--bs-dark-rgb'),
		gray100Rgb: getComputedStyle(document.body).getPropertyValue('--bs-gray-100-rgb'),
		gray200Rgb: getComputedStyle(document.body).getPropertyValue('--bs-gray-200-rgb'),
		gray300Rgb: getComputedStyle(document.body).getPropertyValue('--bs-gray-300-rgb'),
		gray400Rgb: getComputedStyle(document.body).getPropertyValue('--bs-gray-400-rgb'),
		gray500Rgb: getComputedStyle(document.body).getPropertyValue('--bs-gray-500-rgb'),
		gray600Rgb: getComputedStyle(document.body).getPropertyValue('--bs-gray-600-rgb'),
		gray700Rgb: getComputedStyle(document.body).getPropertyValue('--bs-gray-700-rgb'),
		gray800Rgb: getComputedStyle(document.body).getPropertyValue('--bs-gray-800-rgb'),
		gray900Rgb: getComputedStyle(document.body).getPropertyValue('--bs-gray-900-rgb')
	}
};



/* 02. Handle Scrollbar
------------------------------------------------ */

var handleScrollbar = function() {
	"use strict";
	var elms = document.querySelectorAll('['+ app.scrollBar.attr +']');
		
	for (var i = 0; i < elms.length; i++) {
		generateScrollbar(elms[i])
	}
};
var generateScrollbar = function(elm) {
  "use strict";
	
	if ($(elm).attr(app.scrollBar.initAttr) || (app.isMobile && $(elm).attr(app.scrollBar.skipMobileAttr))) {
		return;
	}
	var dataHeight = (!$(elm).attr(app.scrollBar.heightAttr)) ? $(elm).height() : $(elm).attr(app.scrollBar.heightAttr);
	
	$(elm).css('height', dataHeight);
	
	if(app.isMobile) {
		$(elm).css('overflow-x','scroll');
	} else {
		var dataWheelPropagation = ($(elm).attr(app.scrollBar.wheelPropagationAttr)) ? $(elm).attr(app.scrollBar.wheelPropagationAttr) : false;
		
		if ($(elm).closest('.'+ app.sidebar.class).length !== 0) {
			app.sidebar.scrollBar.dom = new PerfectScrollbar(elm, {
				wheelPropagation: dataWheelPropagation
			});
		} else {
			new PerfectScrollbar(elm, {
				wheelPropagation: dataWheelPropagation
			});
		}
	}
	$(elm).attr(app.scrollBar.initAttr, true);
};



/* 03. Handle Sidebar Menu
------------------------------------------------ */

var handleSidebarMenu = function() {
	"use strict";
	$(document).on('click', '.'+ app.sidebar.class +' .'+ app.sidebar.menu.class +' > .'+ app.sidebar.menu.itemClass +'.'+ app.sidebar.menu.hasSubClass +' > .'+ app.sidebar.menu.itemLinkClass, function(e) {
		e.preventDefault();
		
		var target = $(this).next('.'+ app.sidebar.menu.submenu.class);
		var otherMenu = $('.'+ app.sidebar.class +' .'+ app.sidebar.menu.class +' > .'+ app.sidebar.menu.itemClass +'.'+ app.sidebar.menu.hasSubClass +' > .'+ app.sidebar.menu.submenu.class).not(target);

		$(otherMenu).slideUp(app.sidebar.menu.animationTime);
		$(otherMenu).closest('.'+ app.sidebar.menu.itemClass).removeClass(app.sidebar.menu.expandClass);
		
		$(target).slideToggle(app.sidebar.menu.animationTime);
		var targetElm = $(target).closest('.'+ app.sidebar.menu.itemClass);
		if ($(targetElm).hasClass(app.sidebar.menu.expandClass)) {
			$(targetElm).removeClass(app.sidebar.menu.expandClass);
		} else {
			$(targetElm).addClass(app.sidebar.menu.expandClass);
		}
	});
	$(document).on('click', '.'+ app.sidebar.class +' .'+ app.sidebar.menu.class +' > .'+ app.sidebar.menu.itemClass +'.'+ app.sidebar.menu.hasSubClass +' .'+ app.sidebar.menu.submenu.class +' .'+ app.sidebar.menu.itemClass +'.'+ app.sidebar.menu.hasSubClass +' > .'+ app.sidebar.menu.itemLinkClass, function(e) {
		e.preventDefault();
		
		var target = $(this).next('.' + app.sidebar.menu.submenu.class);
		$(target).slideToggle(app.sidebar.menu.animationTime);
	});
};



/* 04. Handle Sidebar Scroll Memory
------------------------------------------------ */

var handleSidebarScrollMemory = function() {
	if (!app.isMobile) {
		try {
			if (typeof(Storage) !== 'undefined' && typeof(localStorage) !== 'undefined') {
				$('.'+ app.sidebar.class +' ['+ app.scrollBar.attr +']').on('scroll', function() {
					localStorage.setItem(app.sidebar.scrollBar.localStorage, $(this).scrollTop());
				});
	
				var defaultScroll = localStorage.getItem(app.sidebar.scrollBar.localStorage);
				if (defaultScroll) {
					$('.'+ app.sidebar.class +' ['+ app.scrollBar.attr +']').animate({ scrollTop: defaultScroll + 'px'}, 0);
				}
			}
		} catch (error) {
			console.log(error);
		}
	}
};



/* 05. Handle Card Action
------------------------------------------------ */

var cardActionRunning = false;
var handleCardAction = function() {
	"use strict";

	if (cardActionRunning) {
		return false;
	}
	cardActionRunning = true;

	// expand
	$(document).on('mouseover', '[data-toggle=card-expand]', function(e) {
		if (!$(this).attr('data-init')) {
			$(this).tooltip({
				title: 'Expand / Compress',
				placement: 'bottom',
				trigger: 'hover',
				container: 'body'
			});
			$(this).tooltip('show');
			$(this).attr('data-init', true);
		}
	});
	$(document).on('click', '[data-toggle=card-expand]', function(e) {
		e.preventDefault();
		var target = $(this).closest('.card');
		var targetBody = $(target).find('.card-body');
		var targetClass = 'card-expand';
		var targetTop = 40;
		if ($(targetBody).length !== 0) {
			var targetOffsetTop = $(target).offset().top;
			var targetBodyOffsetTop = $(targetBody).offset().top;
			targetTop = targetBodyOffsetTop - targetOffsetTop;
		}

		if ($('body').hasClass(targetClass) && $(target).hasClass(targetClass)) {
			$('body, .card').removeClass(targetClass);
			$('.card').removeAttr('style');
			$(targetBody).removeAttr('style');
		} else {
			$('body').addClass(targetClass);
			$(this).closest('.card').addClass(targetClass);
		}
		$(window).trigger('resize');
	});
};



/* 06. Handle Tooltip & Popover Activation
------------------------------------------------ */

var handelTooltipPopoverActivation = function() {
	"use strict";
	
	if ($('['+ app.bootstrap.tooltip.attr +']').length !== 0) {
		var tooltipTriggerList = [].slice.call(document.querySelectorAll('['+ app.bootstrap.tooltip.attr +']'))
		var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
			return new bootstrap.Tooltip(tooltipTriggerEl)
		})
	}
	if ($('['+ app.bootstrap.popover.attr +']').length !== 0) {
		var popoverTriggerList = [].slice.call(document.querySelectorAll('['+ app.bootstrap.popover.attr +']'))
		var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
			return new bootstrap.Popover(popoverTriggerEl)
		})
	}
};



/* 07. Handle Scroll to Top Button
------------------------------------------------ */

var handleScrollToTopButton = function() {
	"use strict";
	
	$(document).scroll( function() {
		var totalScroll = $(document).scrollTop();

		if (totalScroll >= app.scrollToTopBtn.heightShow) {
			if (!$('['+ app.scrollToTopBtn.toggleAttr +']').hasClass(app.scrollToTopBtn.showClass)) {
				$('['+ app.scrollToTopBtn.toggleAttr +']').addClass(app.scrollToTopBtn.showClass);
			}
		} else {
			$('['+ app.scrollToTopBtn.toggleAttr +']').removeClass(app.scrollToTopBtn.showClass);
		}
	});

	$('['+ app.scrollToTopBtn.toggleAttr +']').click(function(e) {
		e.preventDefault();
		
		$('html, body').animate({
			scrollTop: $('body').offset().top
		}, app.scrollToTopBtn.scrollSpeed);
	});

};



/* 08. Handle hexToRgba
------------------------------------------------ */

var hexToRgba = function(hex, transparent = 1) {
	var c;
	if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(hex)){
			c= hex.substring(1).split('');
			if(c.length== 3){
					c= [c[0], c[0], c[1], c[1], c[2], c[2]];
			}
			c= '0x'+c.join('');
			return 'rgba('+[(c>>16)&255, (c>>8)&255, c&255].join(',')+','+ transparent +')';
	}
  throw new Error('Bad Hex');
};



/* 09. Handle Scroll To
------------------------------------------------ */

var handleScrollTo = function() {
	$(document).on('click', '['+ app.scrollTo.attr +']', function(e) {
		e.preventDefault();
		
		var targetElm = ($(this).attr(app.scrollTo.target)) ? $(this).attr(app.scrollTo.target) : $(this).attr(app.scrollTo.linkTarget);
		if (targetElm) {
			$('html, body').animate({
				scrollTop: $(targetElm).offset().top - $(app.header.id).height() - 24
			}, 0);
		}
	});
};



/* 10. Handle Page Scroll Class
------------------------------------------------ */

var handlePageScrollClass = function() {
	var checkScroll = function() {
		if ($(window).scrollTop() > 0) {
			$(app.id).addClass(app.header.hasScrollClass);
		} else {
			$(app.id).removeClass(app.header.hasScrollClass);
		}
	}
	
	$(window).on('scroll', function() {
		checkScroll();
	});
	
	checkScroll();
};



/* 11. Handle Toggle Class
------------------------------------------------ */

var handleToggleClass = function() {
	$(document).on('click', '['+ app.toggleClass.toggleAttr +']', function(e) {
		e.preventDefault();
		
		var targetToggleClass = $(this).attr(app.toggleClass.toggleAttr);
		var targetDismissClass = $(this).attr(app.dismissClass.toggleAttr);
		var targetToggleElm = $(this).attr(app.toggleClass.targetAttr);
		
		if (!targetDismissClass) {
			$(targetToggleElm).toggleClass(targetToggleClass);
		} else {
			if (!$(targetToggleElm).hasClass(targetToggleClass) && !$(targetToggleElm).hasClass(targetDismissClass)) {
				$(targetToggleElm).toggleClass(targetToggleClass);
			} else {
				$(targetToggleElm).toggleClass(targetToggleClass);
				$(targetToggleElm).toggleClass(targetDismissClass);
			}
		}
	});
}



/* 12. Handle Theme Panel
------------------------------------------------ */

var handleThemePanel = function() {
	"use strict";
	
	// 12.1 Theme Panel - Toggle / Dismiss
	$(document).on('click', '['+ app.themePanel.toggleAttr +']', function() {
		var targetContainer = '.'+ app.themePanel.class;
		var targetExpand = false;
		
		if ($(targetContainer).hasClass(app.themePanel.activeClass)) {
			$(targetContainer).removeClass(app.themePanel.activeClass);
		} else {
			$(targetContainer).addClass(app.themePanel.activeClass);
			targetExpand = true;
		}
		if (Cookies) {
			Cookies.set(app.themePanel.cookieName, targetExpand);
		}
	});
	
	// 12.2 Theme Panel - Page Load Cookies 
	if (Cookies) {
		var themePanelExpand = Cookies.get(app.themePanel.cookieName);
		
		if (themePanelExpand == 'true' || typeof themePanelExpand == 'undefined') {
			$('['+ app.themePanel.toggleAttr +']').trigger('click');
		}
	}
	
	
	// 12.3 Theme Panel - Theme Selector
	$(document).on('click', '.'+ app.themePanel.class +' ['+ app.themePanel.theme.toggleAttr +']', function() {
		
		for (var x = 0; x < document.body.classList.length; x++) {
			var targetClass = document.body.classList[x];
			if (targetClass.search('theme-') > -1) {
				$('body').removeClass(targetClass);
			}
		}
		
		var targetTheme = $(this).attr(app.themePanel.theme.classAttr);
		
		$('body').addClass(targetTheme);
		$('.'+ app.themePanel.class +' ['+ app.themePanel.theme.toggleAttr +']').not(this).closest('.'+ app.themePanel.themeListItemCLass).removeClass(app.themePanel.theme.activeClass);
		$(this).closest('.'+ app.themePanel.themeListItemCLass).addClass(app.themePanel.theme.activeClass);
		
		if (Cookies) {
			Cookies.set(app.themePanel.theme.cookieName, targetTheme);
			app.color.theme = getComputedStyle(document.body).getPropertyValue('--bs-theme');
			app.color.themeRgb = getComputedStyle(document.body).getPropertyValue('--bs-theme-rgb');
			$(document).trigger('theme-reload');
		}
	});
	
	if (Cookies) {
		if (Cookies.get(app.themePanel.theme.cookieName)) {
			$('.'+ app.themePanel.class +' ['+ app.themePanel.theme.toggleAttr +']' + '['+ app.themePanel.theme.classAttr +'="'+ Cookies.get(app.themePanel.theme.cookieName) +'"]').trigger('click');
			
			app.color.theme = getComputedStyle(document.body).getPropertyValue('--bs-theme');
			app.color.themeRgb = getComputedStyle(document.body).getPropertyValue('--bs-theme-rgb');
			
			$(document).trigger('theme-reload');
		}
	}
	
	
	// 12.4 Theme Panel - Background Selector
	$(document).on('click', '.'+ app.themePanel.class +' ['+ app.themePanel.themeCover.toggleAttr +']', function(e) {
		e.preventDefault();
		
		for (var x = 0; x < document.documentElement.classList.length; x++) {
			var targetClass = document.documentElement.classList[x];
			if (targetClass.search('bg-cover-') > -1) {
				$('html').removeClass(targetClass);
			}
		}
		
		var targetTheme = $(this).attr(app.themePanel.themeCover.classAttr);
		
		$('html').addClass(targetTheme);
		$('.'+ app.themePanel.class +' ['+ app.themePanel.themeCover.toggleAttr +']').not(this).closest('.'+ app.themePanel.themeCoverItemCLass).removeClass(app.themePanel.themeCover.activeClass);
		$(this).closest('.'+ app.themePanel.themeCoverItemCLass).addClass(app.themePanel.themeCover.activeClass);
		
		if (Cookies) {
			Cookies.set(app.themePanel.themeCover.cookieName, targetTheme);
		}
	});
	
	if (Cookies) {
		if (Cookies.get(app.themePanel.themeCover.cookieName)) {
			$('.'+ app.themePanel.class +' ['+ app.themePanel.themeCover.toggleAttr +']' + '['+ app.themePanel.themeCover.classAttr +'="'+ Cookies.get(app.themePanel.themeCover.cookieName) +'"]').trigger('click');
		}
	}
};

/* Application Controller
------------------------------------------------ */
var App = function () {
	"use strict";
	
	return {
		//main function
		init: function () {
			this.initComponent();
			this.initSidebar();
		},
		initSidebar: function() {
			handleSidebarMenu();
			handleSidebarScrollMemory();
		},
		initComponent: function() {
			handleScrollbar();
			handleScrollToTopButton();
			handleScrollTo();
			handleCardAction();
			handelTooltipPopoverActivation();
			handlePageScrollClass();
			handleToggleClass();
			handleThemePanel();
		},
		scrollTop: function() {
			$('html, body, .content').animate({
				scrollTop: $('body').offset().top
			}, 0);
		}
	};
}();

$(document).ready(function() {
	App.init();
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuVGVtcGxhdGUgTmFtZTogSFVEIC0gUmVzcG9uc2l2ZSBCb290c3RyYXAgNSBBZG1pbiBUZW1wbGF0ZVxuVmVyc2lvbjogMS4zLjBcbkF1dGhvcjogU2VhbiBOZ3VcbldlYnNpdGU6IGh0dHA6Ly93d3cuc2VhbnRoZW1lLmNvbS9odWQvXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHRBUFBTIENPTlRFTlQgVEFCTEVcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cdDwhLS0gPT09PT09PT0gR0xPQkFMIFNDUklQVCBTRVRUSU5HID09PT09PT09IC0tPlxuXHQwMS4gR2xvYmFsIFZhcmlhYmxlXG5cdDAyLiBIYW5kbGUgU2Nyb2xsYmFyXG5cdDAzLiBIYW5kbGUgSGVhZGVyIFNlYXJjaCBCYXJcblx0MDQuIEhhbmRsZSBTaWRlYmFyIE1lbnVcblx0MDUuIEhhbmRsZSBTaWRlYmFyIE1pbmlmeVxuXHQwNi4gSGFuZGxlIFNpZGViYXIgTWluaWZ5IEZsb2F0IE1lbnVcblx0MDcuIEhhbmRsZSBEcm9wZG93biBDbG9zZSBPcHRpb25cblx0MDguIEhhbmRsZSBQYW5lbCAtIFJlbW92ZSAvIFJlbG9hZCAvIENvbGxhcHNlIC8gRXhwYW5kXG5cdDA5LiBIYW5kbGUgVG9vbHRpcCAmIFBvcG92ZXIgQWN0aXZhdGlvblxuXHQxMC4gSGFuZGxlIFNjcm9sbCB0byBUb3AgQnV0dG9uIEFjdGl2YXRpb25cblx0MTEuIEhhbmRsZSBoZXhUb1JnYmFcblx0MTIuIEhhbmRsZSBTY3JvbGwgdG9cblx0XG5cdDwhLS0gPT09PT09PT0gQVBQTElDQVRJT04gU0VUVElORyA9PT09PT09PSAtLT5cblx0QXBwbGljYXRpb24gQ29udHJvbGxlclxuKi9cblxuXG5cbi8qIDAxLiBHbG9iYWwgVmFyaWFibGVcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG52YXIgYXBwID0ge1xuXHRpZDogJyNhcHAnLFxuXHRpc01vYmlsZTogKCgvQW5kcm9pZHx3ZWJPU3xpUGhvbmV8aVBhZHxpUG9kfEJsYWNrQmVycnl8SUVNb2JpbGV8T3BlcmEgTWluaS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpIHx8IHdpbmRvdy5pbm5lcldpZHRoIDwgOTkyKSxcblx0Ym9vdHN0cmFwOiB7XG5cdFx0dG9vbHRpcDoge1xuXHRcdFx0YXR0cjogJ2RhdGEtYnMtdG9nZ2xlPVwidG9vbHRpcFwiJ1xuXHRcdH0sXG5cdFx0cG9wb3Zlcjoge1xuXHRcdFx0YXR0cjogJ2RhdGEtYnMtdG9nZ2xlPVwicG9wb3ZlclwiJ1xuXHRcdH0sXG5cdFx0bW9kYWw6IHtcblx0XHRcdGF0dHI6ICdkYXRhLWJzLXRvZ2dsZT1cIm1vZGFsXCInLFxuXHRcdFx0ZGlzbWlzc0F0dHI6ICdkYXRhLWJzLWRpc21pc3M9XCJtb2RhbFwiJyxcblx0XHRcdGV2ZW50OiB7XG5cdFx0XHRcdGhpZGRlbjogJ2hpZGRlbi5icy5tb2RhbCdcblx0XHRcdH1cblx0XHR9LFxuXHRcdG5hdjoge1xuXHRcdFx0Y2xhc3M6ICduYXYnLFxuXHRcdFx0dGFiczoge1xuXHRcdFx0XHRjbGFzczogJ25hdi10YWJzJyxcblx0XHRcdFx0YWN0aXZlQ2xhc3M6ICdhY3RpdmUnLFxuXHRcdFx0XHRpdGVtQ2xhc3M6ICduYXYtaXRlbScsXG5cdFx0XHRcdGl0ZW1MaW5rQ2xhc3M6ICduYXYtbGluaydcblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cdGhlYWRlcjoge1xuXHRcdGlkOiAnI2hlYWRlcicsXG5cdFx0Y2xhc3M6ICdhcHAtaGVhZGVyJyxcblx0XHRoYXNTY3JvbGxDbGFzczogJ2hhcy1zY3JvbGwnXG5cdH0sXG5cdHNpZGViYXI6IHtcblx0XHRpZDogJyNzaWRlYmFyJyxcblx0XHRjbGFzczogJ2FwcC1zaWRlYmFyJyxcblx0XHRzY3JvbGxCYXI6IHtcblx0XHRcdGxvY2FsU3RvcmFnZTogJ2FwcFNpZGViYXJTY3JvbGxQb3NpdGlvbicsXG5cdFx0XHRkb206ICcnXG5cdFx0fSxcblx0XHRtZW51OiB7XG5cdFx0XHRjbGFzczogJ21lbnUnLFxuXHRcdFx0YW5pbWF0aW9uVGltZTogMCxcblx0XHRcdGl0ZW1DbGFzczogJ21lbnUtaXRlbScsXG5cdFx0XHRpdGVtTGlua0NsYXNzOiAnbWVudS1saW5rJyxcblx0XHRcdGhhc1N1YkNsYXNzOiAnaGFzLXN1YicsXG5cdFx0XHRhY3RpdmVDbGFzczogJ2FjdGl2ZScsXG5cdFx0XHRleHBhbmRpbmdDbGFzczogJ2V4cGFuZGluZycsXG5cdFx0XHRleHBhbmRDbGFzczogJ2V4cGFuZCcsXG5cdFx0XHRzdWJtZW51OiB7XG5cdFx0XHRcdGNsYXNzOiAnbWVudS1zdWJtZW51Jyxcblx0XHRcdH1cblx0XHR9LFxuXHRcdG1vYmlsZToge1xuXHRcdFx0dG9nZ2xlQXR0cjogJ2RhdGEtdG9nZ2xlPVwiYXBwLXNpZGViYXItbW9iaWxlXCInLFxuXHRcdFx0ZGlzbWlzc0F0dHI6ICdkYXRhLWRpc21pc3M9XCJhcHAtc2lkZWJhci1tb2JpbGVcIicsXG5cdFx0XHR0b2dnbGVkQ2xhc3M6ICdhcHAtc2lkZWJhci1tb2JpbGUtdG9nZ2xlZCcsXG5cdFx0XHRjbG9zZWRDbGFzczogJ2FwcC1zaWRlYmFyLW1vYmlsZS1jbG9zZWQnLFxuXHRcdFx0YmFja2Ryb3A6IHtcblx0XHRcdFx0Y2xhc3M6ICdhcHAtc2lkZWJhci1tb2JpbGUtYmFja2Ryb3AnXG5cdFx0XHR9XG5cdFx0fSxcblx0XHRtaW5pZnk6IHtcblx0XHRcdHRvZ2dsZUF0dHI6ICdkYXRhLXRvZ2dsZT1cImFwcC1zaWRlYmFyLW1pbmlmeVwiJyxcblx0XHRcdHRvZ2dsZWRDbGFzczogJ2FwcC1zaWRlYmFyLW1pbmlmaWVkJyxcblx0XHRcdGNvb2tpZU5hbWU6ICdhcHAtc2lkZWJhci1taW5pZmllZCdcblx0XHR9LFxuXHRcdGZsb2F0U3VibWVudToge1xuXHRcdFx0aWQ6ICcjYXBwLXNpZGViYXItZmxvYXQtc3VibWVudScsXG5cdFx0XHRkb206ICcnLFxuXHRcdFx0dGltZW91dDogJycsXG5cdFx0XHRjbGFzczogJ2FwcC1zaWRlYmFyLWZsb2F0LXN1Ym1lbnUnLFxuXHRcdFx0Y29udGFpbmVyOiB7XG5cdFx0XHRcdGNsYXNzOiAnYXBwLXNpZGViYXItZmxvYXQtc3VibWVudS1jb250YWluZXInXG5cdFx0XHR9LFxuXHRcdFx0YXJyb3c6IHtcblx0XHRcdFx0aWQ6ICcjYXBwLXNpZGViYXItZmxvYXQtc3VibWVudS1hcnJvdycsXG5cdFx0XHRcdGNsYXNzOiAnYXBwLXNpZGViYXItZmxvYXQtc3VibWVudS1hcnJvdydcblx0XHRcdH0sXG5cdFx0XHRsaW5lOiB7XG5cdFx0XHRcdGlkOiAnI2FwcC1zaWRlYmFyLWZsb2F0LXN1Ym1lbnUtbGluZScsXG5cdFx0XHRcdGNsYXNzOiAnYXBwLXNpZGViYXItZmxvYXQtc3VibWVudS1saW5lJ1xuXHRcdFx0fSxcblx0XHRcdG92ZXJmbG93OiB7XG5cdFx0XHRcdGNsYXNzOiAnb3ZlcmZsb3ctc2Nyb2xsIG1oLTEwMHZoJ1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0c2VhcmNoOiB7XG5cdFx0XHRjbGFzczogJ21lbnUtc2VhcmNoJyxcblx0XHRcdHRvZ2dsZUF0dHI6ICdkYXRhLXNpZGViYXItc2VhcmNoPVwidHJ1ZVwiJyxcblx0XHRcdGhpZGVDbGFzczogJ2Qtbm9uZScsXG5cdFx0XHRmb3VuZENsYXNzOiAnaGFzLXRleHQnXG5cdFx0fSxcblx0XHR0cmFuc3BhcmVudDoge1xuXHRcdFx0Y2xhc3M6ICdhcHAtc2lkZWJhci10cmFuc3BhcmVudCdcblx0XHR9XG5cdH0sXG5cdHNjcm9sbEJhcjoge1xuXHRcdGF0dHI6ICdkYXRhLXNjcm9sbGJhcj1cInRydWVcIicsXG5cdFx0c2tpcE1vYmlsZUF0dHI6ICdkYXRhLXNraXAtbW9iaWxlJyxcblx0XHRpbml0QXR0cjogJ2RhdGEtaW5pdCcsXG5cdFx0aGVpZ2h0QXR0cjogJ2RhdGEtaGVpZ2h0Jyxcblx0XHR3aGVlbFByb3BhZ2F0aW9uQXR0cjogJ2RhdGEtd2hlZWwtcHJvcGFnYXRpb24nXG5cdH0sXG5cdGNvbnRlbnQ6IHtcblx0XHRpZDogJyNjb250ZW50Jyxcblx0XHRjbGFzczogJ2FwcC1jb250ZW50Jyxcblx0XHRmdWxsSGVpZ2h0OiB7XG5cdFx0XHRjbGFzczogJ2FwcC1jb250ZW50LWZ1bGwtaGVpZ2h0J1xuXHRcdH0sXG5cdFx0ZnVsbFdpZHRoOiB7XG5cdFx0XHRjbGFzczogJ2FwcC1jb250ZW50LWZ1bGwtd2lkdGgnXG5cdFx0fVxuXHR9LFxuXHRsYXlvdXQ6IHtcblx0XHRzaWRlYmFyTGlnaHQ6IHtcblx0XHRcdGNsYXNzOiAnYXBwLXdpdGgtbGlnaHQtc2lkZWJhcidcblx0XHR9LFxuXHRcdHNpZGViYXJFbmQ6IHtcblx0XHRcdGNsYXNzOiAnYXBwLXdpdGgtZW5kLXNpZGViYXInXG5cdFx0fSxcblx0XHRzaWRlYmFyV2lkZToge1xuXHRcdFx0Y2xhc3M6ICdhcHAtd2l0aC13aWRlLXNpZGViYXInXG5cdFx0fSxcblx0XHRzaWRlYmFyTWluaWZpZWQ6IHtcblx0XHRcdGNsYXNzOiAnYXBwLXNpZGViYXItbWluaWZpZWQnXG5cdFx0fSxcblx0XHRzaWRlYmFyVHdvOiB7XG5cdFx0XHRjbGFzczogJ2FwcC13aXRoLXR3by1zaWRlYmFyJ1xuXHRcdH0sXG5cdFx0d2l0aG91dEhlYWRlcjoge1xuXHRcdFx0Y2xhc3M6ICdhcHAtd2l0aG91dC1oZWFkZXInXG5cdFx0fSxcblx0XHR3aXRob3V0U2lkZWJhcjoge1xuXHRcdFx0Y2xhc3M6ICdhcHAtd2l0aG91dC1zaWRlYmFyJ1xuXHRcdH0sXG5cdFx0dG9wTWVudToge1xuXHRcdFx0Y2xhc3M6ICdhcHAtd2l0aC10b3AtbWVudSdcblx0XHR9LFxuXHRcdGJveGVkTGF5b3V0OiB7XG5cdFx0XHRjbGFzczogJ2JveGVkLWxheW91dCdcblx0XHR9XG5cdH0sXG5cdHNjcm9sbFRvVG9wQnRuOiB7XG5cdFx0c2hvd0NsYXNzOiAnc2hvdycsXG5cdFx0aGVpZ2h0U2hvdzogMjAwLFxuXHRcdHRvZ2dsZUF0dHI6ICdkYXRhLXRvZ2dsZT1cInNjcm9sbC10by10b3BcIicsXG5cdFx0c2Nyb2xsU3BlZWQ6IDUwMFxuXHR9LFxuXHRzY3JvbGxUbzoge1xuXHRcdGF0dHI6ICdkYXRhLXRvZ2dsZT1cInNjcm9sbC10b1wiJyxcblx0XHR0YXJnZXQ6ICdkYXRhLXRhcmdldCcsXG5cdFx0bGlua1RhcmdldDogJ2hyZWYnXG5cdH0sXG5cdHRoZW1lUGFuZWw6IHtcblx0XHRjbGFzczogJ2FwcC10aGVtZS1wYW5lbCcsXG5cdFx0dG9nZ2xlQXR0cjogJ2RhdGEtdG9nZ2xlPVwidGhlbWUtcGFuZWwtZXhwYW5kXCInLFxuXHRcdGNvb2tpZU5hbWU6ICdhcHAtdGhlbWUtcGFuZWwtZXhwYW5kJyxcblx0XHRhY3RpdmVDbGFzczogJ2FjdGl2ZScsXG5cdFx0dGhlbWVMaXN0Q0xhc3M6ICdhcHAtdGhlbWUtbGlzdCcsXG5cdFx0dGhlbWVMaXN0SXRlbUNMYXNzOiAnYXBwLXRoZW1lLWxpc3QtaXRlbScsXG5cdFx0dGhlbWVDb3ZlckNsYXNzOiAnYXBwLXRoZW1lLWNvdmVyJyxcblx0XHR0aGVtZUNvdmVySXRlbUNMYXNzOiAnYXBwLXRoZW1lLWNvdmVyLWl0ZW0nLFxuXHRcdHRoZW1lOiB7XG5cdFx0XHR0b2dnbGVBdHRyOiAnZGF0YS10b2dnbGU9XCJ0aGVtZS1zZWxlY3RvclwiJyxcblx0XHRcdGNsYXNzQXR0cjogJ2RhdGEtdGhlbWUtY2xhc3MnLFxuXHRcdFx0Y29va2llTmFtZTogJ2FwcC10aGVtZScsXG5cdFx0XHRhY3RpdmVDbGFzczogJ2FjdGl2ZSdcblx0XHR9LFxuXHRcdHRoZW1lQ292ZXI6IHtcblx0XHRcdHRvZ2dsZUF0dHI6ICdkYXRhLXRvZ2dsZT1cInRoZW1lLWNvdmVyLXNlbGVjdG9yXCInLFxuXHRcdFx0Y2xhc3NBdHRyOiAnZGF0YS10aGVtZS1jb3Zlci1jbGFzcycsXG5cdFx0XHRjb29raWVOYW1lOiAnYXBwLXRoZW1lLWNvdmVyJyxcblx0XHRcdGFjdGl2ZUNsYXNzOiAnYWN0aXZlJ1xuXHRcdH1cblx0fSxcblx0ZGlzbWlzc0NsYXNzOiB7XG5cdFx0dG9nZ2xlQXR0cjogJ2RhdGEtZGlzbWlzcy1jbGFzcycsXG5cdFx0dGFyZ2V0QXR0cjogJ2RhdGEtZGlzbWlzcy10YXJnZXQnXG5cdH0sXG5cdHRvZ2dsZUNsYXNzOiB7XG5cdFx0dG9nZ2xlQXR0cjogJ2RhdGEtdG9nZ2xlLWNsYXNzJyxcblx0XHR0YXJnZXRBdHRyOiAnZGF0YS10b2dnbGUtdGFyZ2V0J1xuXHR9LFxuXHRmb250OiB7XG5cdFx0ZmFtaWx5OiBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoJy0tYnMtYm9keS1mb250LWZhbWlseScpLFxuXHRcdHNpemU6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZSgnLS1icy1ib2R5LWZvbnQtc2l6ZScpLFxuXHRcdHdlaWdodDogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKCctLWJzLWJvZHktZm9udC13ZWlnaHQnKVxuXHR9LFxuXHRjb2xvcjoge1xuXHRcdHRoZW1lOiBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoJy0tYnMtdGhlbWUnKSxcblx0XHRibHVlOiBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoJy0tYnMtYmx1ZScpLFxuXHRcdGdyZWVuOiBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoJy0tYnMtZ3JlZW4nKSxcblx0XHRvcmFuZ2U6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZSgnLS1icy1vcmFuZ2UnKSxcblx0XHRyZWQ6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZSgnLS1icy1yZWQnKSxcblx0XHRjeWFuOiBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoJy0tYnMtY3lhbicpLFxuXHRcdHB1cnBsZTogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKCctLWJzLXB1cnBsZScpLFxuXHRcdHllbGxvdzogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKCctLWJzLXllbGxvdycpLFxuXHRcdGluZGlnbzogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKCctLWJzLWluZGlnbycpLFxuXHRcdHBpbms6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZSgnLS1icy1waW5rJyksXG5cdFx0YmxhY2s6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZSgnLS1icy1ibGFjaycpLFxuXHRcdHdoaXRlOiBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoJy0tYnMtd2hpdGUnKSxcblx0XHRncmF5OiBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoJy0tYnMtZ3JheScpLFxuXHRcdGRhcms6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZSgnLS1icy1kYXJrJyksXG5cdFx0Z3JheTEwMDogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKCctLWJzLWdyYXktMTAwJyksXG5cdFx0Z3JheTIwMDogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKCctLWJzLWdyYXktMjAwJyksXG5cdFx0Z3JheTMwMDogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKCctLWJzLWdyYXktMzAwJyksXG5cdFx0Z3JheTQwMDogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKCctLWJzLWdyYXktNDAwJyksXG5cdFx0Z3JheTUwMDogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKCctLWJzLWdyYXktNTAwJyksXG5cdFx0Z3JheTYwMDogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKCctLWJzLWdyYXktNjAwJyksXG5cdFx0Z3JheTcwMDogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKCctLWJzLWdyYXktNzAwJyksXG5cdFx0Z3JheTgwMDogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKCctLWJzLWdyYXktODAwJyksXG5cdFx0Z3JheTkwMDogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKCctLWJzLWdyYXktOTAwJyksXG5cdFx0XG5cdFx0dGhlbWVSZ2I6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZSgnLS1icy10aGVtZS1yZ2InKSxcblx0XHRibHVlUmdiOiBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoJy0tYnMtYmx1ZS1yZ2InKSxcblx0XHRncmVlblJnYjogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKCctLWJzLWdyZWVuLXJnYicpLFxuXHRcdG9yYW5nZVJnYjogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKCctLWJzLW9yYW5nZS1yZ2InKSxcblx0XHRyZWRSZ2I6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZSgnLS1icy1yZWQtcmdiJyksXG5cdFx0Y3lhblJnYjogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKCctLWJzLWN5YW4tcmdiJyksXG5cdFx0cHVycGxlUmdiOiBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoJy0tYnMtcHVycGxlLXJnYicpLFxuXHRcdHllbGxvd1JnYjogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKCctLWJzLXllbGxvdy1yZ2InKSxcblx0XHRpbmRpZ29SZ2I6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZSgnLS1icy1pbmRpZ28tcmdiJyksXG5cdFx0cGlua1JnYjogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKCctLWJzLXBpbmstcmdiJyksXG5cdFx0YmxhY2tSZ2I6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZSgnLS1icy1ibGFjay1yZ2InKSxcblx0XHR3aGl0ZVJnYjogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKCctLWJzLXdoaXRlLXJnYicpLFxuXHRcdGdyYXlSZ2I6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZSgnLS1icy1ncmF5LXJnYicpLFxuXHRcdGRhcmtSZ2I6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZSgnLS1icy1kYXJrLXJnYicpLFxuXHRcdGdyYXkxMDBSZ2I6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZSgnLS1icy1ncmF5LTEwMC1yZ2InKSxcblx0XHRncmF5MjAwUmdiOiBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoJy0tYnMtZ3JheS0yMDAtcmdiJyksXG5cdFx0Z3JheTMwMFJnYjogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKCctLWJzLWdyYXktMzAwLXJnYicpLFxuXHRcdGdyYXk0MDBSZ2I6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZSgnLS1icy1ncmF5LTQwMC1yZ2InKSxcblx0XHRncmF5NTAwUmdiOiBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoJy0tYnMtZ3JheS01MDAtcmdiJyksXG5cdFx0Z3JheTYwMFJnYjogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKCctLWJzLWdyYXktNjAwLXJnYicpLFxuXHRcdGdyYXk3MDBSZ2I6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZSgnLS1icy1ncmF5LTcwMC1yZ2InKSxcblx0XHRncmF5ODAwUmdiOiBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoJy0tYnMtZ3JheS04MDAtcmdiJyksXG5cdFx0Z3JheTkwMFJnYjogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKCctLWJzLWdyYXktOTAwLXJnYicpXG5cdH1cbn07XG5cblxuXG4vKiAwMi4gSGFuZGxlIFNjcm9sbGJhclxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbnZhciBoYW5kbGVTY3JvbGxiYXIgPSBmdW5jdGlvbigpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBlbG1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnWycrIGFwcC5zY3JvbGxCYXIuYXR0ciArJ10nKTtcblx0XHRcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBlbG1zLmxlbmd0aDsgaSsrKSB7XG5cdFx0Z2VuZXJhdGVTY3JvbGxiYXIoZWxtc1tpXSlcblx0fVxufTtcbnZhciBnZW5lcmF0ZVNjcm9sbGJhciA9IGZ1bmN0aW9uKGVsbSkge1xuICBcInVzZSBzdHJpY3RcIjtcblx0XG5cdGlmICgkKGVsbSkuYXR0cihhcHAuc2Nyb2xsQmFyLmluaXRBdHRyKSB8fCAoYXBwLmlzTW9iaWxlICYmICQoZWxtKS5hdHRyKGFwcC5zY3JvbGxCYXIuc2tpcE1vYmlsZUF0dHIpKSkge1xuXHRcdHJldHVybjtcblx0fVxuXHR2YXIgZGF0YUhlaWdodCA9ICghJChlbG0pLmF0dHIoYXBwLnNjcm9sbEJhci5oZWlnaHRBdHRyKSkgPyAkKGVsbSkuaGVpZ2h0KCkgOiAkKGVsbSkuYXR0cihhcHAuc2Nyb2xsQmFyLmhlaWdodEF0dHIpO1xuXHRcblx0JChlbG0pLmNzcygnaGVpZ2h0JywgZGF0YUhlaWdodCk7XG5cdFxuXHRpZihhcHAuaXNNb2JpbGUpIHtcblx0XHQkKGVsbSkuY3NzKCdvdmVyZmxvdy14Jywnc2Nyb2xsJyk7XG5cdH0gZWxzZSB7XG5cdFx0dmFyIGRhdGFXaGVlbFByb3BhZ2F0aW9uID0gKCQoZWxtKS5hdHRyKGFwcC5zY3JvbGxCYXIud2hlZWxQcm9wYWdhdGlvbkF0dHIpKSA/ICQoZWxtKS5hdHRyKGFwcC5zY3JvbGxCYXIud2hlZWxQcm9wYWdhdGlvbkF0dHIpIDogZmFsc2U7XG5cdFx0XG5cdFx0aWYgKCQoZWxtKS5jbG9zZXN0KCcuJysgYXBwLnNpZGViYXIuY2xhc3MpLmxlbmd0aCAhPT0gMCkge1xuXHRcdFx0YXBwLnNpZGViYXIuc2Nyb2xsQmFyLmRvbSA9IG5ldyBQZXJmZWN0U2Nyb2xsYmFyKGVsbSwge1xuXHRcdFx0XHR3aGVlbFByb3BhZ2F0aW9uOiBkYXRhV2hlZWxQcm9wYWdhdGlvblxuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdG5ldyBQZXJmZWN0U2Nyb2xsYmFyKGVsbSwge1xuXHRcdFx0XHR3aGVlbFByb3BhZ2F0aW9uOiBkYXRhV2hlZWxQcm9wYWdhdGlvblxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cdCQoZWxtKS5hdHRyKGFwcC5zY3JvbGxCYXIuaW5pdEF0dHIsIHRydWUpO1xufTtcblxuXG5cbi8qIDAzLiBIYW5kbGUgU2lkZWJhciBNZW51XG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxudmFyIGhhbmRsZVNpZGViYXJNZW51ID0gZnVuY3Rpb24oKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXHQkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLicrIGFwcC5zaWRlYmFyLmNsYXNzICsnIC4nKyBhcHAuc2lkZWJhci5tZW51LmNsYXNzICsnID4gLicrIGFwcC5zaWRlYmFyLm1lbnUuaXRlbUNsYXNzICsnLicrIGFwcC5zaWRlYmFyLm1lbnUuaGFzU3ViQ2xhc3MgKycgPiAuJysgYXBwLnNpZGViYXIubWVudS5pdGVtTGlua0NsYXNzLCBmdW5jdGlvbihlKSB7XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFxuXHRcdHZhciB0YXJnZXQgPSAkKHRoaXMpLm5leHQoJy4nKyBhcHAuc2lkZWJhci5tZW51LnN1Ym1lbnUuY2xhc3MpO1xuXHRcdHZhciBvdGhlck1lbnUgPSAkKCcuJysgYXBwLnNpZGViYXIuY2xhc3MgKycgLicrIGFwcC5zaWRlYmFyLm1lbnUuY2xhc3MgKycgPiAuJysgYXBwLnNpZGViYXIubWVudS5pdGVtQ2xhc3MgKycuJysgYXBwLnNpZGViYXIubWVudS5oYXNTdWJDbGFzcyArJyA+IC4nKyBhcHAuc2lkZWJhci5tZW51LnN1Ym1lbnUuY2xhc3MpLm5vdCh0YXJnZXQpO1xuXG5cdFx0JChvdGhlck1lbnUpLnNsaWRlVXAoYXBwLnNpZGViYXIubWVudS5hbmltYXRpb25UaW1lKTtcblx0XHQkKG90aGVyTWVudSkuY2xvc2VzdCgnLicrIGFwcC5zaWRlYmFyLm1lbnUuaXRlbUNsYXNzKS5yZW1vdmVDbGFzcyhhcHAuc2lkZWJhci5tZW51LmV4cGFuZENsYXNzKTtcblx0XHRcblx0XHQkKHRhcmdldCkuc2xpZGVUb2dnbGUoYXBwLnNpZGViYXIubWVudS5hbmltYXRpb25UaW1lKTtcblx0XHR2YXIgdGFyZ2V0RWxtID0gJCh0YXJnZXQpLmNsb3Nlc3QoJy4nKyBhcHAuc2lkZWJhci5tZW51Lml0ZW1DbGFzcyk7XG5cdFx0aWYgKCQodGFyZ2V0RWxtKS5oYXNDbGFzcyhhcHAuc2lkZWJhci5tZW51LmV4cGFuZENsYXNzKSkge1xuXHRcdFx0JCh0YXJnZXRFbG0pLnJlbW92ZUNsYXNzKGFwcC5zaWRlYmFyLm1lbnUuZXhwYW5kQ2xhc3MpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkKHRhcmdldEVsbSkuYWRkQ2xhc3MoYXBwLnNpZGViYXIubWVudS5leHBhbmRDbGFzcyk7XG5cdFx0fVxuXHR9KTtcblx0JChkb2N1bWVudCkub24oJ2NsaWNrJywgJy4nKyBhcHAuc2lkZWJhci5jbGFzcyArJyAuJysgYXBwLnNpZGViYXIubWVudS5jbGFzcyArJyA+IC4nKyBhcHAuc2lkZWJhci5tZW51Lml0ZW1DbGFzcyArJy4nKyBhcHAuc2lkZWJhci5tZW51Lmhhc1N1YkNsYXNzICsnIC4nKyBhcHAuc2lkZWJhci5tZW51LnN1Ym1lbnUuY2xhc3MgKycgLicrIGFwcC5zaWRlYmFyLm1lbnUuaXRlbUNsYXNzICsnLicrIGFwcC5zaWRlYmFyLm1lbnUuaGFzU3ViQ2xhc3MgKycgPiAuJysgYXBwLnNpZGViYXIubWVudS5pdGVtTGlua0NsYXNzLCBmdW5jdGlvbihlKSB7XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFxuXHRcdHZhciB0YXJnZXQgPSAkKHRoaXMpLm5leHQoJy4nICsgYXBwLnNpZGViYXIubWVudS5zdWJtZW51LmNsYXNzKTtcblx0XHQkKHRhcmdldCkuc2xpZGVUb2dnbGUoYXBwLnNpZGViYXIubWVudS5hbmltYXRpb25UaW1lKTtcblx0fSk7XG59O1xuXG5cblxuLyogMDQuIEhhbmRsZSBTaWRlYmFyIFNjcm9sbCBNZW1vcnlcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG52YXIgaGFuZGxlU2lkZWJhclNjcm9sbE1lbW9yeSA9IGZ1bmN0aW9uKCkge1xuXHRpZiAoIWFwcC5pc01vYmlsZSkge1xuXHRcdHRyeSB7XG5cdFx0XHRpZiAodHlwZW9mKFN0b3JhZ2UpICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YobG9jYWxTdG9yYWdlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdFx0JCgnLicrIGFwcC5zaWRlYmFyLmNsYXNzICsnIFsnKyBhcHAuc2Nyb2xsQmFyLmF0dHIgKyddJykub24oJ3Njcm9sbCcsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGxvY2FsU3RvcmFnZS5zZXRJdGVtKGFwcC5zaWRlYmFyLnNjcm9sbEJhci5sb2NhbFN0b3JhZ2UsICQodGhpcykuc2Nyb2xsVG9wKCkpO1xuXHRcdFx0XHR9KTtcblx0XG5cdFx0XHRcdHZhciBkZWZhdWx0U2Nyb2xsID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oYXBwLnNpZGViYXIuc2Nyb2xsQmFyLmxvY2FsU3RvcmFnZSk7XG5cdFx0XHRcdGlmIChkZWZhdWx0U2Nyb2xsKSB7XG5cdFx0XHRcdFx0JCgnLicrIGFwcC5zaWRlYmFyLmNsYXNzICsnIFsnKyBhcHAuc2Nyb2xsQmFyLmF0dHIgKyddJykuYW5pbWF0ZSh7IHNjcm9sbFRvcDogZGVmYXVsdFNjcm9sbCArICdweCd9LCAwKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRjb25zb2xlLmxvZyhlcnJvcik7XG5cdFx0fVxuXHR9XG59O1xuXG5cblxuLyogMDUuIEhhbmRsZSBDYXJkIEFjdGlvblxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbnZhciBjYXJkQWN0aW9uUnVubmluZyA9IGZhbHNlO1xudmFyIGhhbmRsZUNhcmRBY3Rpb24gPSBmdW5jdGlvbigpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0aWYgKGNhcmRBY3Rpb25SdW5uaW5nKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cdGNhcmRBY3Rpb25SdW5uaW5nID0gdHJ1ZTtcblxuXHQvLyBleHBhbmRcblx0JChkb2N1bWVudCkub24oJ21vdXNlb3ZlcicsICdbZGF0YS10b2dnbGU9Y2FyZC1leHBhbmRdJywgZnVuY3Rpb24oZSkge1xuXHRcdGlmICghJCh0aGlzKS5hdHRyKCdkYXRhLWluaXQnKSkge1xuXHRcdFx0JCh0aGlzKS50b29sdGlwKHtcblx0XHRcdFx0dGl0bGU6ICdFeHBhbmQgLyBDb21wcmVzcycsXG5cdFx0XHRcdHBsYWNlbWVudDogJ2JvdHRvbScsXG5cdFx0XHRcdHRyaWdnZXI6ICdob3ZlcicsXG5cdFx0XHRcdGNvbnRhaW5lcjogJ2JvZHknXG5cdFx0XHR9KTtcblx0XHRcdCQodGhpcykudG9vbHRpcCgnc2hvdycpO1xuXHRcdFx0JCh0aGlzKS5hdHRyKCdkYXRhLWluaXQnLCB0cnVlKTtcblx0XHR9XG5cdH0pO1xuXHQkKGRvY3VtZW50KS5vbignY2xpY2snLCAnW2RhdGEtdG9nZ2xlPWNhcmQtZXhwYW5kXScsIGZ1bmN0aW9uKGUpIHtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0dmFyIHRhcmdldCA9ICQodGhpcykuY2xvc2VzdCgnLmNhcmQnKTtcblx0XHR2YXIgdGFyZ2V0Qm9keSA9ICQodGFyZ2V0KS5maW5kKCcuY2FyZC1ib2R5Jyk7XG5cdFx0dmFyIHRhcmdldENsYXNzID0gJ2NhcmQtZXhwYW5kJztcblx0XHR2YXIgdGFyZ2V0VG9wID0gNDA7XG5cdFx0aWYgKCQodGFyZ2V0Qm9keSkubGVuZ3RoICE9PSAwKSB7XG5cdFx0XHR2YXIgdGFyZ2V0T2Zmc2V0VG9wID0gJCh0YXJnZXQpLm9mZnNldCgpLnRvcDtcblx0XHRcdHZhciB0YXJnZXRCb2R5T2Zmc2V0VG9wID0gJCh0YXJnZXRCb2R5KS5vZmZzZXQoKS50b3A7XG5cdFx0XHR0YXJnZXRUb3AgPSB0YXJnZXRCb2R5T2Zmc2V0VG9wIC0gdGFyZ2V0T2Zmc2V0VG9wO1xuXHRcdH1cblxuXHRcdGlmICgkKCdib2R5JykuaGFzQ2xhc3ModGFyZ2V0Q2xhc3MpICYmICQodGFyZ2V0KS5oYXNDbGFzcyh0YXJnZXRDbGFzcykpIHtcblx0XHRcdCQoJ2JvZHksIC5jYXJkJykucmVtb3ZlQ2xhc3ModGFyZ2V0Q2xhc3MpO1xuXHRcdFx0JCgnLmNhcmQnKS5yZW1vdmVBdHRyKCdzdHlsZScpO1xuXHRcdFx0JCh0YXJnZXRCb2R5KS5yZW1vdmVBdHRyKCdzdHlsZScpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkKCdib2R5JykuYWRkQ2xhc3ModGFyZ2V0Q2xhc3MpO1xuXHRcdFx0JCh0aGlzKS5jbG9zZXN0KCcuY2FyZCcpLmFkZENsYXNzKHRhcmdldENsYXNzKTtcblx0XHR9XG5cdFx0JCh3aW5kb3cpLnRyaWdnZXIoJ3Jlc2l6ZScpO1xuXHR9KTtcbn07XG5cblxuXG4vKiAwNi4gSGFuZGxlIFRvb2x0aXAgJiBQb3BvdmVyIEFjdGl2YXRpb25cbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG52YXIgaGFuZGVsVG9vbHRpcFBvcG92ZXJBY3RpdmF0aW9uID0gZnVuY3Rpb24oKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0aWYgKCQoJ1snKyBhcHAuYm9vdHN0cmFwLnRvb2x0aXAuYXR0ciArJ10nKS5sZW5ndGggIT09IDApIHtcblx0XHR2YXIgdG9vbHRpcFRyaWdnZXJMaXN0ID0gW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbJysgYXBwLmJvb3RzdHJhcC50b29sdGlwLmF0dHIgKyddJykpXG5cdFx0dmFyIHRvb2x0aXBMaXN0ID0gdG9vbHRpcFRyaWdnZXJMaXN0Lm1hcChmdW5jdGlvbiAodG9vbHRpcFRyaWdnZXJFbCkge1xuXHRcdFx0cmV0dXJuIG5ldyBib290c3RyYXAuVG9vbHRpcCh0b29sdGlwVHJpZ2dlckVsKVxuXHRcdH0pXG5cdH1cblx0aWYgKCQoJ1snKyBhcHAuYm9vdHN0cmFwLnBvcG92ZXIuYXR0ciArJ10nKS5sZW5ndGggIT09IDApIHtcblx0XHR2YXIgcG9wb3ZlclRyaWdnZXJMaXN0ID0gW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbJysgYXBwLmJvb3RzdHJhcC5wb3BvdmVyLmF0dHIgKyddJykpXG5cdFx0dmFyIHBvcG92ZXJMaXN0ID0gcG9wb3ZlclRyaWdnZXJMaXN0Lm1hcChmdW5jdGlvbiAocG9wb3ZlclRyaWdnZXJFbCkge1xuXHRcdFx0cmV0dXJuIG5ldyBib290c3RyYXAuUG9wb3Zlcihwb3BvdmVyVHJpZ2dlckVsKVxuXHRcdH0pXG5cdH1cbn07XG5cblxuXG4vKiAwNy4gSGFuZGxlIFNjcm9sbCB0byBUb3AgQnV0dG9uXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxudmFyIGhhbmRsZVNjcm9sbFRvVG9wQnV0dG9uID0gZnVuY3Rpb24oKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0JChkb2N1bWVudCkuc2Nyb2xsKCBmdW5jdGlvbigpIHtcblx0XHR2YXIgdG90YWxTY3JvbGwgPSAkKGRvY3VtZW50KS5zY3JvbGxUb3AoKTtcblxuXHRcdGlmICh0b3RhbFNjcm9sbCA+PSBhcHAuc2Nyb2xsVG9Ub3BCdG4uaGVpZ2h0U2hvdykge1xuXHRcdFx0aWYgKCEkKCdbJysgYXBwLnNjcm9sbFRvVG9wQnRuLnRvZ2dsZUF0dHIgKyddJykuaGFzQ2xhc3MoYXBwLnNjcm9sbFRvVG9wQnRuLnNob3dDbGFzcykpIHtcblx0XHRcdFx0JCgnWycrIGFwcC5zY3JvbGxUb1RvcEJ0bi50b2dnbGVBdHRyICsnXScpLmFkZENsYXNzKGFwcC5zY3JvbGxUb1RvcEJ0bi5zaG93Q2xhc3MpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHQkKCdbJysgYXBwLnNjcm9sbFRvVG9wQnRuLnRvZ2dsZUF0dHIgKyddJykucmVtb3ZlQ2xhc3MoYXBwLnNjcm9sbFRvVG9wQnRuLnNob3dDbGFzcyk7XG5cdFx0fVxuXHR9KTtcblxuXHQkKCdbJysgYXBwLnNjcm9sbFRvVG9wQnRuLnRvZ2dsZUF0dHIgKyddJykuY2xpY2soZnVuY3Rpb24oZSkge1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcblx0XHQkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XG5cdFx0XHRzY3JvbGxUb3A6ICQoJ2JvZHknKS5vZmZzZXQoKS50b3Bcblx0XHR9LCBhcHAuc2Nyb2xsVG9Ub3BCdG4uc2Nyb2xsU3BlZWQpO1xuXHR9KTtcblxufTtcblxuXG5cbi8qIDA4LiBIYW5kbGUgaGV4VG9SZ2JhXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxudmFyIGhleFRvUmdiYSA9IGZ1bmN0aW9uKGhleCwgdHJhbnNwYXJlbnQgPSAxKSB7XG5cdHZhciBjO1xuXHRpZigvXiMoW0EtRmEtZjAtOV17M30pezEsMn0kLy50ZXN0KGhleCkpe1xuXHRcdFx0Yz0gaGV4LnN1YnN0cmluZygxKS5zcGxpdCgnJyk7XG5cdFx0XHRpZihjLmxlbmd0aD09IDMpe1xuXHRcdFx0XHRcdGM9IFtjWzBdLCBjWzBdLCBjWzFdLCBjWzFdLCBjWzJdLCBjWzJdXTtcblx0XHRcdH1cblx0XHRcdGM9ICcweCcrYy5qb2luKCcnKTtcblx0XHRcdHJldHVybiAncmdiYSgnK1soYz4+MTYpJjI1NSwgKGM+PjgpJjI1NSwgYyYyNTVdLmpvaW4oJywnKSsnLCcrIHRyYW5zcGFyZW50ICsnKSc7XG5cdH1cbiAgdGhyb3cgbmV3IEVycm9yKCdCYWQgSGV4Jyk7XG59O1xuXG5cblxuLyogMDkuIEhhbmRsZSBTY3JvbGwgVG9cbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG52YXIgaGFuZGxlU2Nyb2xsVG8gPSBmdW5jdGlvbigpIHtcblx0JChkb2N1bWVudCkub24oJ2NsaWNrJywgJ1snKyBhcHAuc2Nyb2xsVG8uYXR0ciArJ10nLCBmdW5jdGlvbihlKSB7XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFxuXHRcdHZhciB0YXJnZXRFbG0gPSAoJCh0aGlzKS5hdHRyKGFwcC5zY3JvbGxUby50YXJnZXQpKSA/ICQodGhpcykuYXR0cihhcHAuc2Nyb2xsVG8udGFyZ2V0KSA6ICQodGhpcykuYXR0cihhcHAuc2Nyb2xsVG8ubGlua1RhcmdldCk7XG5cdFx0aWYgKHRhcmdldEVsbSkge1xuXHRcdFx0JCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xuXHRcdFx0XHRzY3JvbGxUb3A6ICQodGFyZ2V0RWxtKS5vZmZzZXQoKS50b3AgLSAkKGFwcC5oZWFkZXIuaWQpLmhlaWdodCgpIC0gMjRcblx0XHRcdH0sIDApO1xuXHRcdH1cblx0fSk7XG59O1xuXG5cblxuLyogMTAuIEhhbmRsZSBQYWdlIFNjcm9sbCBDbGFzc1xuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbnZhciBoYW5kbGVQYWdlU2Nyb2xsQ2xhc3MgPSBmdW5jdGlvbigpIHtcblx0dmFyIGNoZWNrU2Nyb2xsID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYgKCQod2luZG93KS5zY3JvbGxUb3AoKSA+IDApIHtcblx0XHRcdCQoYXBwLmlkKS5hZGRDbGFzcyhhcHAuaGVhZGVyLmhhc1Njcm9sbENsYXNzKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0JChhcHAuaWQpLnJlbW92ZUNsYXNzKGFwcC5oZWFkZXIuaGFzU2Nyb2xsQ2xhc3MpO1xuXHRcdH1cblx0fVxuXHRcblx0JCh3aW5kb3cpLm9uKCdzY3JvbGwnLCBmdW5jdGlvbigpIHtcblx0XHRjaGVja1Njcm9sbCgpO1xuXHR9KTtcblx0XG5cdGNoZWNrU2Nyb2xsKCk7XG59O1xuXG5cblxuLyogMTEuIEhhbmRsZSBUb2dnbGUgQ2xhc3Ncbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG52YXIgaGFuZGxlVG9nZ2xlQ2xhc3MgPSBmdW5jdGlvbigpIHtcblx0JChkb2N1bWVudCkub24oJ2NsaWNrJywgJ1snKyBhcHAudG9nZ2xlQ2xhc3MudG9nZ2xlQXR0ciArJ10nLCBmdW5jdGlvbihlKSB7XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFxuXHRcdHZhciB0YXJnZXRUb2dnbGVDbGFzcyA9ICQodGhpcykuYXR0cihhcHAudG9nZ2xlQ2xhc3MudG9nZ2xlQXR0cik7XG5cdFx0dmFyIHRhcmdldERpc21pc3NDbGFzcyA9ICQodGhpcykuYXR0cihhcHAuZGlzbWlzc0NsYXNzLnRvZ2dsZUF0dHIpO1xuXHRcdHZhciB0YXJnZXRUb2dnbGVFbG0gPSAkKHRoaXMpLmF0dHIoYXBwLnRvZ2dsZUNsYXNzLnRhcmdldEF0dHIpO1xuXHRcdFxuXHRcdGlmICghdGFyZ2V0RGlzbWlzc0NsYXNzKSB7XG5cdFx0XHQkKHRhcmdldFRvZ2dsZUVsbSkudG9nZ2xlQ2xhc3ModGFyZ2V0VG9nZ2xlQ2xhc3MpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRpZiAoISQodGFyZ2V0VG9nZ2xlRWxtKS5oYXNDbGFzcyh0YXJnZXRUb2dnbGVDbGFzcykgJiYgISQodGFyZ2V0VG9nZ2xlRWxtKS5oYXNDbGFzcyh0YXJnZXREaXNtaXNzQ2xhc3MpKSB7XG5cdFx0XHRcdCQodGFyZ2V0VG9nZ2xlRWxtKS50b2dnbGVDbGFzcyh0YXJnZXRUb2dnbGVDbGFzcyk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQkKHRhcmdldFRvZ2dsZUVsbSkudG9nZ2xlQ2xhc3ModGFyZ2V0VG9nZ2xlQ2xhc3MpO1xuXHRcdFx0XHQkKHRhcmdldFRvZ2dsZUVsbSkudG9nZ2xlQ2xhc3ModGFyZ2V0RGlzbWlzc0NsYXNzKTtcblx0XHRcdH1cblx0XHR9XG5cdH0pO1xufVxuXG5cblxuLyogMTIuIEhhbmRsZSBUaGVtZSBQYW5lbFxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbnZhciBoYW5kbGVUaGVtZVBhbmVsID0gZnVuY3Rpb24oKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0Ly8gMTIuMSBUaGVtZSBQYW5lbCAtIFRvZ2dsZSAvIERpc21pc3Ncblx0JChkb2N1bWVudCkub24oJ2NsaWNrJywgJ1snKyBhcHAudGhlbWVQYW5lbC50b2dnbGVBdHRyICsnXScsIGZ1bmN0aW9uKCkge1xuXHRcdHZhciB0YXJnZXRDb250YWluZXIgPSAnLicrIGFwcC50aGVtZVBhbmVsLmNsYXNzO1xuXHRcdHZhciB0YXJnZXRFeHBhbmQgPSBmYWxzZTtcblx0XHRcblx0XHRpZiAoJCh0YXJnZXRDb250YWluZXIpLmhhc0NsYXNzKGFwcC50aGVtZVBhbmVsLmFjdGl2ZUNsYXNzKSkge1xuXHRcdFx0JCh0YXJnZXRDb250YWluZXIpLnJlbW92ZUNsYXNzKGFwcC50aGVtZVBhbmVsLmFjdGl2ZUNsYXNzKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0JCh0YXJnZXRDb250YWluZXIpLmFkZENsYXNzKGFwcC50aGVtZVBhbmVsLmFjdGl2ZUNsYXNzKTtcblx0XHRcdHRhcmdldEV4cGFuZCA9IHRydWU7XG5cdFx0fVxuXHRcdGlmIChDb29raWVzKSB7XG5cdFx0XHRDb29raWVzLnNldChhcHAudGhlbWVQYW5lbC5jb29raWVOYW1lLCB0YXJnZXRFeHBhbmQpO1xuXHRcdH1cblx0fSk7XG5cdFxuXHQvLyAxMi4yIFRoZW1lIFBhbmVsIC0gUGFnZSBMb2FkIENvb2tpZXMgXG5cdGlmIChDb29raWVzKSB7XG5cdFx0dmFyIHRoZW1lUGFuZWxFeHBhbmQgPSBDb29raWVzLmdldChhcHAudGhlbWVQYW5lbC5jb29raWVOYW1lKTtcblx0XHRcblx0XHRpZiAodGhlbWVQYW5lbEV4cGFuZCA9PSAndHJ1ZScgfHwgdHlwZW9mIHRoZW1lUGFuZWxFeHBhbmQgPT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdCQoJ1snKyBhcHAudGhlbWVQYW5lbC50b2dnbGVBdHRyICsnXScpLnRyaWdnZXIoJ2NsaWNrJyk7XG5cdFx0fVxuXHR9XG5cdFxuXHRcblx0Ly8gMTIuMyBUaGVtZSBQYW5lbCAtIFRoZW1lIFNlbGVjdG9yXG5cdCQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuJysgYXBwLnRoZW1lUGFuZWwuY2xhc3MgKycgWycrIGFwcC50aGVtZVBhbmVsLnRoZW1lLnRvZ2dsZUF0dHIgKyddJywgZnVuY3Rpb24oKSB7XG5cdFx0XG5cdFx0Zm9yICh2YXIgeCA9IDA7IHggPCBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5sZW5ndGg7IHgrKykge1xuXHRcdFx0dmFyIHRhcmdldENsYXNzID0gZG9jdW1lbnQuYm9keS5jbGFzc0xpc3RbeF07XG5cdFx0XHRpZiAodGFyZ2V0Q2xhc3Muc2VhcmNoKCd0aGVtZS0nKSA+IC0xKSB7XG5cdFx0XHRcdCQoJ2JvZHknKS5yZW1vdmVDbGFzcyh0YXJnZXRDbGFzcyk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdFxuXHRcdHZhciB0YXJnZXRUaGVtZSA9ICQodGhpcykuYXR0cihhcHAudGhlbWVQYW5lbC50aGVtZS5jbGFzc0F0dHIpO1xuXHRcdFxuXHRcdCQoJ2JvZHknKS5hZGRDbGFzcyh0YXJnZXRUaGVtZSk7XG5cdFx0JCgnLicrIGFwcC50aGVtZVBhbmVsLmNsYXNzICsnIFsnKyBhcHAudGhlbWVQYW5lbC50aGVtZS50b2dnbGVBdHRyICsnXScpLm5vdCh0aGlzKS5jbG9zZXN0KCcuJysgYXBwLnRoZW1lUGFuZWwudGhlbWVMaXN0SXRlbUNMYXNzKS5yZW1vdmVDbGFzcyhhcHAudGhlbWVQYW5lbC50aGVtZS5hY3RpdmVDbGFzcyk7XG5cdFx0JCh0aGlzKS5jbG9zZXN0KCcuJysgYXBwLnRoZW1lUGFuZWwudGhlbWVMaXN0SXRlbUNMYXNzKS5hZGRDbGFzcyhhcHAudGhlbWVQYW5lbC50aGVtZS5hY3RpdmVDbGFzcyk7XG5cdFx0XG5cdFx0aWYgKENvb2tpZXMpIHtcblx0XHRcdENvb2tpZXMuc2V0KGFwcC50aGVtZVBhbmVsLnRoZW1lLmNvb2tpZU5hbWUsIHRhcmdldFRoZW1lKTtcblx0XHRcdGFwcC5jb2xvci50aGVtZSA9IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZSgnLS1icy10aGVtZScpO1xuXHRcdFx0YXBwLmNvbG9yLnRoZW1lUmdiID0gZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKCctLWJzLXRoZW1lLXJnYicpO1xuXHRcdFx0JChkb2N1bWVudCkudHJpZ2dlcigndGhlbWUtcmVsb2FkJyk7XG5cdFx0fVxuXHR9KTtcblx0XG5cdGlmIChDb29raWVzKSB7XG5cdFx0aWYgKENvb2tpZXMuZ2V0KGFwcC50aGVtZVBhbmVsLnRoZW1lLmNvb2tpZU5hbWUpKSB7XG5cdFx0XHQkKCcuJysgYXBwLnRoZW1lUGFuZWwuY2xhc3MgKycgWycrIGFwcC50aGVtZVBhbmVsLnRoZW1lLnRvZ2dsZUF0dHIgKyddJyArICdbJysgYXBwLnRoZW1lUGFuZWwudGhlbWUuY2xhc3NBdHRyICsnPVwiJysgQ29va2llcy5nZXQoYXBwLnRoZW1lUGFuZWwudGhlbWUuY29va2llTmFtZSkgKydcIl0nKS50cmlnZ2VyKCdjbGljaycpO1xuXHRcdFx0XG5cdFx0XHRhcHAuY29sb3IudGhlbWUgPSBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoJy0tYnMtdGhlbWUnKTtcblx0XHRcdGFwcC5jb2xvci50aGVtZVJnYiA9IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZSgnLS1icy10aGVtZS1yZ2InKTtcblx0XHRcdFxuXHRcdFx0JChkb2N1bWVudCkudHJpZ2dlcigndGhlbWUtcmVsb2FkJyk7XG5cdFx0fVxuXHR9XG5cdFxuXHRcblx0Ly8gMTIuNCBUaGVtZSBQYW5lbCAtIEJhY2tncm91bmQgU2VsZWN0b3Jcblx0JChkb2N1bWVudCkub24oJ2NsaWNrJywgJy4nKyBhcHAudGhlbWVQYW5lbC5jbGFzcyArJyBbJysgYXBwLnRoZW1lUGFuZWwudGhlbWVDb3Zlci50b2dnbGVBdHRyICsnXScsIGZ1bmN0aW9uKGUpIHtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XG5cdFx0Zm9yICh2YXIgeCA9IDA7IHggPCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0Lmxlbmd0aDsgeCsrKSB7XG5cdFx0XHR2YXIgdGFyZ2V0Q2xhc3MgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0W3hdO1xuXHRcdFx0aWYgKHRhcmdldENsYXNzLnNlYXJjaCgnYmctY292ZXItJykgPiAtMSkge1xuXHRcdFx0XHQkKCdodG1sJykucmVtb3ZlQ2xhc3ModGFyZ2V0Q2xhc3MpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRcblx0XHR2YXIgdGFyZ2V0VGhlbWUgPSAkKHRoaXMpLmF0dHIoYXBwLnRoZW1lUGFuZWwudGhlbWVDb3Zlci5jbGFzc0F0dHIpO1xuXHRcdFxuXHRcdCQoJ2h0bWwnKS5hZGRDbGFzcyh0YXJnZXRUaGVtZSk7XG5cdFx0JCgnLicrIGFwcC50aGVtZVBhbmVsLmNsYXNzICsnIFsnKyBhcHAudGhlbWVQYW5lbC50aGVtZUNvdmVyLnRvZ2dsZUF0dHIgKyddJykubm90KHRoaXMpLmNsb3Nlc3QoJy4nKyBhcHAudGhlbWVQYW5lbC50aGVtZUNvdmVySXRlbUNMYXNzKS5yZW1vdmVDbGFzcyhhcHAudGhlbWVQYW5lbC50aGVtZUNvdmVyLmFjdGl2ZUNsYXNzKTtcblx0XHQkKHRoaXMpLmNsb3Nlc3QoJy4nKyBhcHAudGhlbWVQYW5lbC50aGVtZUNvdmVySXRlbUNMYXNzKS5hZGRDbGFzcyhhcHAudGhlbWVQYW5lbC50aGVtZUNvdmVyLmFjdGl2ZUNsYXNzKTtcblx0XHRcblx0XHRpZiAoQ29va2llcykge1xuXHRcdFx0Q29va2llcy5zZXQoYXBwLnRoZW1lUGFuZWwudGhlbWVDb3Zlci5jb29raWVOYW1lLCB0YXJnZXRUaGVtZSk7XG5cdFx0fVxuXHR9KTtcblx0XG5cdGlmIChDb29raWVzKSB7XG5cdFx0aWYgKENvb2tpZXMuZ2V0KGFwcC50aGVtZVBhbmVsLnRoZW1lQ292ZXIuY29va2llTmFtZSkpIHtcblx0XHRcdCQoJy4nKyBhcHAudGhlbWVQYW5lbC5jbGFzcyArJyBbJysgYXBwLnRoZW1lUGFuZWwudGhlbWVDb3Zlci50b2dnbGVBdHRyICsnXScgKyAnWycrIGFwcC50aGVtZVBhbmVsLnRoZW1lQ292ZXIuY2xhc3NBdHRyICsnPVwiJysgQ29va2llcy5nZXQoYXBwLnRoZW1lUGFuZWwudGhlbWVDb3Zlci5jb29raWVOYW1lKSArJ1wiXScpLnRyaWdnZXIoJ2NsaWNrJyk7XG5cdFx0fVxuXHR9XG59O1xuXG4vKiBBcHBsaWNhdGlvbiBDb250cm9sbGVyXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbnZhciBBcHAgPSBmdW5jdGlvbiAoKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0cmV0dXJuIHtcblx0XHQvL21haW4gZnVuY3Rpb25cblx0XHRpbml0OiBmdW5jdGlvbiAoKSB7XG5cdFx0XHR0aGlzLmluaXRDb21wb25lbnQoKTtcblx0XHRcdHRoaXMuaW5pdFNpZGViYXIoKTtcblx0XHR9LFxuXHRcdGluaXRTaWRlYmFyOiBmdW5jdGlvbigpIHtcblx0XHRcdGhhbmRsZVNpZGViYXJNZW51KCk7XG5cdFx0XHRoYW5kbGVTaWRlYmFyU2Nyb2xsTWVtb3J5KCk7XG5cdFx0fSxcblx0XHRpbml0Q29tcG9uZW50OiBmdW5jdGlvbigpIHtcblx0XHRcdGhhbmRsZVNjcm9sbGJhcigpO1xuXHRcdFx0aGFuZGxlU2Nyb2xsVG9Ub3BCdXR0b24oKTtcblx0XHRcdGhhbmRsZVNjcm9sbFRvKCk7XG5cdFx0XHRoYW5kbGVDYXJkQWN0aW9uKCk7XG5cdFx0XHRoYW5kZWxUb29sdGlwUG9wb3ZlckFjdGl2YXRpb24oKTtcblx0XHRcdGhhbmRsZVBhZ2VTY3JvbGxDbGFzcygpO1xuXHRcdFx0aGFuZGxlVG9nZ2xlQ2xhc3MoKTtcblx0XHRcdGhhbmRsZVRoZW1lUGFuZWwoKTtcblx0XHR9LFxuXHRcdHNjcm9sbFRvcDogZnVuY3Rpb24oKSB7XG5cdFx0XHQkKCdodG1sLCBib2R5LCAuY29udGVudCcpLmFuaW1hdGUoe1xuXHRcdFx0XHRzY3JvbGxUb3A6ICQoJ2JvZHknKS5vZmZzZXQoKS50b3Bcblx0XHRcdH0sIDApO1xuXHRcdH1cblx0fTtcbn0oKTtcblxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG5cdEFwcC5pbml0KCk7XG59KTsiXX0=
